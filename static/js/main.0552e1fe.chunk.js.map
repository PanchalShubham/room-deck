{"version":3,"sources":["utility/ToastedNotes.js","context/ChatContext.js","components/Homepage.js","utility/Modal.js","components/ChatInput.js","utility/DataAccessObject.js","components/Message.js","components/Room.js","utility/Overlay.js","utility/RectangularLoader.js","App.js","index.js","assets/download.png"],"names":["elementRef","ToastedNotesContainer","state","toasts","defaultTimeOut","props","timeOut","deleteToast","id","setState","prevState","oldToasts","index","findIndex","toast","splice","deleteAllToasts","addToast","body","options","appearance","autoDismiss","toastId","position","uuidv4","icon","faInfoCircle","faBug","faCheck","faExclamation","timeToDismiss","setTimeout","push","render","topLeft","topCenter","topRight","center","bottomLeft","bottomCenter","bottomRight","i","length","positions","items","map","pos","className","key","onClick","faTimes","children","React","Component","ToastedNotes","ref","el","message","Error","removeToast","chatContext","createContext","Homepage","useContext","ChatContext","createOrJoinRoom","username","setUsername","roomId","setRoomId","restrictAccess","setRestrictAccess","useState","nameError","setNameError","text","disabled","autoComplete","method","onSubmit","event","preventDefault","trim","type","name","value","placeholder","onChange","target","checked","faHeart","href","ModalComponent","item","showModal","closeModal","Modal","ChatInput","sendMessage","MESSAGE_TYPE","setText","showEmojiPicker","setShowEmojiPicker","showAttachment","setShowAttachment","focusInput","document","getElementById","focus","execCommand","getSelection","collapseToEnd","prepareAndSendMessage","content","filename","caption","dispatchMessage","userText","String","TEXT","pickAttachment","input","createElement","accept","AUDIO","VIDEO","IMAGE","setAttribute","addEventListener","files","file","size","MAX_FILE_SIZE","MAX_FILE_SIZE_STRING","reader","FileReader","onload","result","FILE","download","src","DownloadIcon","alt","controls","onKeyDown","button","click","captionInput","faPaperPlane","prepareMessage","readAsDataURL","faSmile","faFileAlt","faFileVideo","faFileAudio","faFileImage","faPaperclip","contentEditable","dangerouslySetInnerHTML","__html","onInput","innerText","onPaste","onEmojiClick","emojiObject","emoji","skinTone","SKIN_TONE_LIGHT","disableAutoFocus","native","CONFIG","Message","admin","amIAuthor","timeStamp","messageToComponent","Room","mounted","useRef","useEffect","current","div","scrollTop","scrollHeight","room","messageList","userId","exitFromRoom","navigator","clipboard","writeText","then","people","faUserAlt","faEllipsisH","amIOwner","Overlay","RectangularLoader","App","socket","setSocket","setRoom","setUserId","setMessageList","toastList","setToastList","loadingMessage","setLoadingMessage","connectionErrorCount","setConnectionErrorCount","flagError","flagInfo","updateRoomDetails","useCallback","errorMessage","infoMessage","disconnect","fetch","response","json","ip","mySocket","io","autoConnect","forceNew","reconnection","reconnectionAttempts","query","clientIp","catch","error","console","log","off","on","tempId","emit","socketId","oldMessage","decrypted","encryptedString","CryptoJS","AES","decrypt","toString","enc","Utf8","JSON","parse","decryptMessage","connect","itemToDisplay","Provider","messageObject","encryptedContent","encrypt","stringify","ReactDOM","StrictMode","module","exports"],"mappings":"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","file":"static/js/main.0552e1fe.chunk.js","sourcesContent":["import React from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBug, faCheck, faExclamation, faInfoCircle, faTimes } from '@fortawesome/free-solid-svg-icons';\nimport '../styles/ToastedNotes.scss';\n// stores the ref to the returned component\nlet elementRef = null;\n// default time out\nconst DEFAULT_TIME_OUT = 2000;\n// faInfoCircle\nclass ToastedNotesContainer extends React.Component{\n    // states for the toasts\n    state = {\n        toasts: []\n    };\n    // stores the default autoDismiss\n    defaultTimeOut = this.props.timeOut || DEFAULT_TIME_OUT;\n    // delets the toasts with given id\n    deleteToast = (id) => {\n        // update the toasts\n        this.setState(prevState => {\n            // get the old toasts\n            let oldToasts = [...prevState.toasts];\n            // find the toast with given index\n            let index = oldToasts.findIndex(toast => toast.id === id);\n            // check if such a toast exist\n            if (index === -1)   return;\n            // delete this toast\n            oldToasts.splice(index, 1);\n            // update the toasts\n            return {toasts: oldToasts}\n        });\n    };\n    // delete all toasts\n    deleteAllToasts = () => this.setState({toasts: []});\n    // static method to add toasts\n    addToast = (body, options) => {\n        // get the properties of the toast\n        let {\n            appearance, \n            autoDismiss, \n            timeOut, \n            toastId, \n            position\n        } = options;\n        // get or create toastId\n        let id = toastId || uuidv4();\n        // stores the icon\n        let icon = null;\n        // prepareIcon according to type\n        if      (appearance === `info`)     icon = faInfoCircle;\n        else if (appearance === `error`)    icon = faBug;\n        else if (appearance === `success`)  icon = faCheck;\n        else if (appearance === `warning`)  icon = faExclamation;\n        // if autoDismiss is set then dismiss\n        if (autoDismiss) {\n            // timeout in millis\n            let timeToDismiss = timeOut || this.defaultTimeOut;\n            // setTimeout]\n            setTimeout(this.deleteToast, timeToDismiss, id);\n        }\n\n        // update the state\n        this.setState(prevState => {\n            // get the old toasts\n            let oldToasts = [...prevState.toasts];\n            // add the toast\n            oldToasts.push({appearance, body, icon, id, position});\n            // return the updated toasts\n            return {toasts: oldToasts};\n        });\n\n        // return the id of the toast\n        return id;\n    };\n\n    // render method\n    render = () => {\n        // stores the toasts for appropriate positions\n        let topLeft = [];\n        let topCenter = [];\n        let topRight = [];\n        let center = [];\n        let bottomLeft = [];\n        let bottomCenter = [];\n        let bottomRight = [];\n        // get the toasts\n        let toasts = this.state.toasts;\n        // filter the toasts according to the positions\n        for (let i = 0; i < toasts.length; ++i) {\n            // get the toast\n            let toast = toasts[i];\n            // get the position of the toast\n            let position = toast.position || 'top-right';\n            // add the toast to appropriate container\n            if (position === 'top-left')            topLeft.push(toast);\n            else if (position === 'top-center')     topCenter.push(toast);\n            else if (position === 'top-right')      topRight.push(toast);\n            else if (position === 'center')         center.push(toast);\n            else if (position === 'bottom-left')    bottomLeft.push(toast);\n            else if (position === 'bottom-center')  bottomCenter.push(toast);\n            else if (position === 'bottom-right')   bottomRight.push(toast);\n        }\n\n        // create an array to iterate through all positions\n        let positions = [\n            {position: 'top-left', items: topLeft},\n            {position: 'top-center', items: topCenter},\n            {position: 'top-right', items: topRight},\n            {position: 'center', items: center},\n            {position: 'bottom-left', items: bottomLeft},\n            {position: 'bottom-center', items: bottomCenter},\n            {position: 'bottom-right', items: bottomRight},\n        ];\n\n        return (\n            <div id=\"toasted-notes\">\n                {positions.map(pos => (\n                    <div className={`toasted-notes-container ${pos.position}`}\n                            key={pos.position}>\n                        {pos.items.map(toast => (\n                            <div className=\"toast\" key={toast.id}>\n                                {(toast.appearance && toast.appearance !== 'none') &&\n                                <div className={`toast-icon toast-${toast.appearance}`}>\n                                    <FontAwesomeIcon icon={toast.icon} />\n                                </div>\n                                }\n                                <div className=\"toast-body\">\n                                    {toast.body}\n                                </div>\n                                {(toast.appearance && toast.appearance !== 'none') &&\n                                <div className=\"toast-close\">\n                                    <button onClick={() => this.deleteToast(toast.id)}>\n                                        <FontAwesomeIcon icon={faTimes} />\n                                    </button>\n                                </div>\n                                }\n                            </div>\n                        ))}\n                    </div>\n                ))}\n                {this.props.children}\n            </div>\n        );    \n    };\n};\n\n// wrapper over toasted\nclass ToastedNotes extends React.Component{\n    render = () => {\n        return (\n            <ToastedNotesContainer ref={el => elementRef = el} >\n                {this.props.children}\n            </ToastedNotesContainer>\n        );\n    };\n};\nexport default ToastedNotes;\n\n// adds a toast\nexport const addToast = (message, options) => {\n    if (!elementRef)    throw new Error(\"<ToastedNotes /> component should be rendered for addToast\");\n    return elementRef.addToast(message, options);\n}\n\n// removes a toast\nexport const removeToast = (id) => {\n    if (!elementRef)    throw new Error(\"<ToastedNotes /> component should be rendered for addToast\");\n    elementRef.deleteToast(id);\n};\n\n// removes all the toasts\nexport const removeAllToasts = () => {\n    if (!elementRef)    throw new Error(\"<ToastedNotes /> component should be rendered for addToast\");\n    elementRef.deleteAllToasts();\n}","import React from 'react';\nconst chatContext = React.createContext({\n\n});\nexport default chatContext;","import React, { useContext, useState } from 'react';\nimport '../styles/Homepage.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHeart } from '@fortawesome/free-solid-svg-icons';\nimport {addToast} from '../utility/ToastedNotes';\nimport ChatContext from '../context/ChatContext';\n\n// flags an error message\nconst flagError = (message) => addToast(message, {appearance: 'error'});\n// functional component to be rendered\nexport default function Homepage(props) {\n    // get the function from the props\n    const {\n        createOrJoinRoom,\n        username, setUsername,\n        roomId, setRoomId,\n        restrictAccess, setRestrictAccess,\n    } = useContext(ChatContext);\n    const [nameError, setNameError] = useState('');\n\n    // handles the onsubmit request\n    const onSubmit = (event) => {\n        event.preventDefault();\n        let name = username.trim();\n        if (name === '') return flagError(`Please provide a valid username`);\n        // create or join room\n        createOrJoinRoom();\n    };\n\n    // get the text to be displayed\n    let text = (roomId === '' ? 'Create' : 'Join');\n    let disabled = (roomId);\n    // actual component to be rendered\n    return (\n        <div className=\"homepageOuterContainer\">\n            <div className=\"homepage\">\n                <div className=\"brand\">\n                    <h1>ROOM DECK</h1>\n                    <p>\n                        Create an instant room and start chatting with friends, family or community. <br/>\n                        A completely free service available 24x7 with no registrations!\n                    </p>\n                </div>\n                <div className=\"formDiv\">\n                    <div className=\"formHeading\">\n                        {text} ROOM\n                    </div>\n                    <form autoComplete=\"off\" method=\"POST\" onSubmit={onSubmit}>\n                        <input type=\"text\" name='username' value={username}\n                            className=\"input\" placeholder='Your Name'\n                            onChange={event => {\n                                let {value} = event.target;\n                                setUsername(value);\n                                if (value.trim() === '') setNameError('Please provide a valid name!');\n                                else                     setNameError('');\n                            }}/>\n                        <div className=\"formErrorMessage\">{nameError}</div>\n                        <input type=\"text\" name='roomId' value={roomId}\n                            className=\"input\" placeholder='Room Id'\n                            onChange={event => {\n                                // update the value\n                                setRoomId(event.target.value);\n                                // take decision based on value\n                                if (event.target.value) setRestrictAccess(false);\n                            }}/>\n                        <div className=\"checkbox-input\">\n                            <input type=\"checkbox\" \n                                checked={restrictAccess} disabled={disabled}\n                            onChange={() => setRestrictAccess(!restrictAccess)} /> \n                            <span className={disabled ? 'disabled' : ''}>Restrict access (requires permission to join)</span>\n                        </div>\n                        <input type=\"submit\" className=\"submitButton\" value={text}></input>\n                    </form>\n                </div>\n                <div className=\"footer\">\n                    Made with <span><FontAwesomeIcon icon={faHeart} /></span> by <a href=\"http://shubhampanchal.herokuapp.com\">Shubham Panchal</a>\n                </div>\n            </div>\n        </div>\n    );\n};\n","import React from 'react';\nimport '../styles/Modal.scss';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// stores the ref to the returned component\nlet elementRef = null;\n// component\nclass ModalComponent extends React.Component {\n    state = {\n        item: null\n    };\n    showModal = (item) => this.setState({item});\n    closeModal = () => this.setState({item: null});\n    render = () => (\n        <div className=\"modal\">\n            {this.state.item && \n            <div className=\"modal-content\">\n                <div className=\"closeButtonContainer\">\n                    <button onClick={closeModal}>\n                        <FontAwesomeIcon icon={faTimes} />\n                    </button>\n                </div>\n                <div className=\"modal-body\">\n                    {this.state.item}\n                </div>\n            </div>}\n        </div>\n    );\n};\n\n// create the modal component\nclass Modal extends React.Component{\n    render = () => {\n        return <ModalComponent ref={el => elementRef = el} />\n    };\n};\n// export the modal component\nexport default Modal;\n\n// provide methods for user interaction\nexport const showModal = (item) => {\n    if (!elementRef)    throw new Error(\"<Modal /> component should be rendered for addToast\");\n    return elementRef.showModal(item);\n}\n// provide methods for user interaction\nexport const closeModal = () => {\n    if (!elementRef)    throw new Error(\"<Modal /> component should be rendered for addToast\");\n    return elementRef.closeModal();\n}","import React, { useContext, useState } from 'react';\nimport Picker, { SKIN_TONE_LIGHT} from \"emoji-picker-react\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFileAlt, faFileAudio, faFileImage, faFileVideo, \n        faPaperclip, faPaperPlane, faSmile, faTimes} from '@fortawesome/free-solid-svg-icons';\nimport '../styles/ChatInput.scss';\nimport ChatContext from '../context/ChatContext';\nimport {addToast} from '../utility/ToastedNotes';\nimport {showModal, closeModal} from '../utility/Modal';\nimport DownloadIcon from '../assets/download.png';\nimport AudioPlayer from 'react-h5-audio-player';\nimport 'react-h5-audio-player/lib/styles.css';\n\n// functional component\nexport default function ChatInput(props){    \n    const {\n        sendMessage,\n        MESSAGE_TYPE,\n    } = useContext(ChatContext);\n    const [text, setText] = useState('');\n    const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n    const [showAttachment, setShowAttachment] = useState(false);\n    const onEmojiClick = (event, emojiObject) => {\n        setText(text + emojiObject.emoji);\n        focusInput();\n    };\n    const focusInput = () => {\n        document.getElementById('chat-input').focus();\n        document.execCommand('selectAll', false, null);\n        document.getSelection().collapseToEnd();\n    };\n    const inputHandler = (event) => {\n        event.preventDefault();\n        setText(event.target.innerText);\n        focusInput();\n    };\n    const prepareAndSendMessage = (content, type, filename = null, caption = null) => {\n\t\t// prepare the message\n        let item = {content, type, filename, caption};\n        // send the message\n        sendMessage(item);\n    };\n    const dispatchMessage = () => {\n        let userText = String(text).trim();\n        if (userText === '') return;\n        setShowEmojiPicker(false);\n        setText('');\n        prepareAndSendMessage(userText, MESSAGE_TYPE.TEXT);\n    };\n    const keyDownHandler = (event) => {\n        if (event.key === 'Enter') {\n            event.preventDefault();\n            dispatchMessage();\n        }\n    };\n\n    const prepareMessage = (type, content, filename) => {\n        let item = null;\n        if (type === MESSAGE_TYPE.FILE){\n            item = <a href={content} className=\"fileAttachment\" \n                        download={filename}>\n                        <img src={DownloadIcon} alt=\"\"/> {filename}\n                    </a>\n        } else if (type === MESSAGE_TYPE.IMAGE) {\n            item = <img src={content} alt=\"\" />\n        } else if (type === MESSAGE_TYPE.AUDIO) {\n            item = <AudioPlayer controls src={content} />\n        } else if (type === MESSAGE_TYPE.VIDEO) {\n            item = <video controls src={content} />\n        }\n        return (\n            <div>\n                {item}\n                <div className=\"caption\">\n                    <input type=\"text\" id=\"caption\" autoComplete=\"off\"\n                        placeholder=\"Type a caption...\" onKeyDown={event => {\n                            if (event.key === 'Enter') {\n                                event.preventDefault();\n                                let button = document.getElementById(`sendAttachment`);\n                                if (button) button.click();\n                            }                    \n                        }} />\n                    <button id=\"sendAttachment\" onClick={()=> {\n                        closeModal();\n                        let captionInput = document.getElementById('caption');\n                        let caption = null;\n                        if (captionInput)   caption = captionInput.value;\n                        prepareAndSendMessage(content, type, filename, caption);\n                    }}>\n                        <FontAwesomeIcon icon={faPaperPlane} /> Send\n                    </button>\n                </div>\n            </div>\n        );\n    }\n\n    const pickAttachment = (type) => {\n        // prepare the input\n        let input = document.createElement('input');\n        let accept = null;\n        if      (type === MESSAGE_TYPE.AUDIO) accept = \"audio/*\";\n        else if (type === MESSAGE_TYPE.VIDEO) accept = \"video/*\";\n        else if (type === MESSAGE_TYPE.IMAGE) accept = \"image/*\";\n        input.setAttribute('type', 'file');\n        if (accept) input.setAttribute('accept', accept);\n        input.addEventListener('change', () => {\n            if (input.files && input.files.length === 1) {\n                let file = input.files[0];\n                let _size = file.size;\n                if (_size > MESSAGE_TYPE.MAX_FILE_SIZE) \n                    return addToast(`Max. file size size is ${MESSAGE_TYPE.MAX_FILE_SIZE_STRING}`, {appearance: 'error'});\n                setShowAttachment(false);\n                let reader = new FileReader();\n                reader.onload = (event) => {\n                    let {result} = event.target;\n                    let itemToDisplay = prepareMessage(type, result, file.name);\n                    showModal(itemToDisplay);\n                    let captionInput = document.getElementById('caption');\n                    if (captionInput)   captionInput.focus();\n                };\n                reader.readAsDataURL(file);\n            }\n        });\n        // read the input\n        input.click();\n    };\n\n    return (\n        <div className=\"chat-input\">\n            <div className=\"fields\">\n                <button onClick={() => setShowEmojiPicker(!showEmojiPicker)}>\n                    <FontAwesomeIcon icon={showEmojiPicker ? faTimes : faSmile} />\n                </button>\n                <div>\n                    {showAttachment &&\n                    <div className=\"attachmentButtons\">\n                        <button className=\"fileButton\" onClick={() => pickAttachment(MESSAGE_TYPE.FILE)}>\n                            <FontAwesomeIcon icon={faFileAlt} />\n                        </button>\n                        <button className=\"videoButton\" onClick={() => pickAttachment(MESSAGE_TYPE.VIDEO)}>\n                            <FontAwesomeIcon icon={faFileVideo} />\n                        </button>\n                        <button className=\"audioButton\" onClick={() => pickAttachment(MESSAGE_TYPE.AUDIO)}>\n                            <FontAwesomeIcon icon={faFileAudio} />\n                        </button>\n                        <button className=\"imageButton\" onClick={() => pickAttachment(MESSAGE_TYPE.IMAGE)}>\n                            <FontAwesomeIcon icon={faFileImage} />\n                        </button>\n                    </div>}\n                    <button onClick={() => setShowAttachment(!showAttachment)}>\n                        <FontAwesomeIcon icon={showAttachment ? faTimes : faPaperclip} />\n                    </button>\n                </div>\n                <div className=\"chatInputContainer\">\n                    <div \n                        contentEditable \n                        id=\"chat-input\"\n                        dangerouslySetInnerHTML={{__html: text}}                    \n                        onInput={inputHandler}\n                        onPaste={event => event.preventDefault()}\n                        onKeyDown={keyDownHandler}\n                    ></div>\n                </div>\n                <button onClick={dispatchMessage}>\n                    <FontAwesomeIcon icon={faPaperPlane} />\n                </button>\n            </div>\n            {showEmojiPicker && \n            <div className=\"emoji-container\">\n                <Picker \n                    onEmojiClick={onEmojiClick}\n                    skinTone={SKIN_TONE_LIGHT}\n                    disableAutoFocus={true}\n                    native={true}\n                />\n            </div>}\n        </div>\n    );\n};","// necessary imports\nimport CryptoJS from 'crypto-js';\n\n// performs an ecnryption on the text\nexport const encryptMessage = (key, messageObject) => {\n    let bytes = CryptoJS.AES.encrypt(JSON.stringify(messageObject), key);\n    let cipherText = bytes.toString();\n    return cipherText;\n};\n// performs the decryption on the text\nexport const decryptMessage = (key, encryptedString)=>{\n    let bytes = CryptoJS.AES.decrypt(encryptedString, key);\n    let text = bytes.toString(CryptoJS.enc.Utf8);\n    return JSON.parse(text);\n};\n\n// constants for message-type\nexport const MESSAGE_TYPE = {\n    MAX_FILE_SIZE: 10*1000000,\n    MAX_FILE_SIZE_STRING : '10mb',\n    TEXT : 'text',\n    AUDIO : 'audio',\n    VIDEO : 'video',\n    IMAGE: 'image',\n    FILE : 'file'\n};\n\n// configuration\nexport const CONFIG = {\n    // ENDPOINT : `http://localhost:8080/`,\n    ENDPOINT : `https://room-deck-server.herokuapp.com`,\n    MAX_RECONNECTION_ATTEMPTS : 5,\n    CONNECT : 'connect',\n    CONNECTION_ERROR : 'connect_error',\n    IP_ERROR : 'ip-error',\n    CREATE_OR_JOIN : 'create-or-join',\n    CREATE_ROOM_SUCCESS : 'create-room-success',\n    FOUND_RUNNING_ROOM_SESSION : 'found-running-room-session',\n    NO_SUCH_ROOM_ERROR : 'no-such-room-error',\n    JOINED_VIA_ANOTHER_WINDOW : 'joined-via-another-window',\n    JOIN_ROOM_SUCCESS : 'join-room-success',\n    JOIN_ROOM_REQUEST : 'join-room-request',\n    WAIT_FOR_APPROVAL : 'wait-for-approval',\n    APPROVE_REQUEST : 'approve-request',\n    REJECT_REQUEST : 'reject-request',\n    REQUEST_TO_JOIN_REJECTED : 'request-to-join-rejected',\n    LET_CLIENT_IN : 'let-client-in',\n    JOINED_ROOM : 'joined-room',\n    LEFT_ROOM : 'left-room',\n    MESSAGE_ALL : 'message-all',\n    EXIT_FROM_ROOM : 'exit-from-room',\n    TERMINATE_ROOM : 'terminate-room',\n    ROOM_TIME_OUT : 'room-time-out',\n};\n","import React from 'react';\nimport '../styles/Message.scss';\nimport {MESSAGE_TYPE} from '../utility/DataAccessObject';\nimport DownloadIcon from '../assets/download.png';\nimport AudioPlayer from 'react-h5-audio-player';\nimport 'react-h5-audio-player/lib/styles.css';\n\n\nconst messageToComponent = (message) => {\n    let {type, content, filename, caption} = message;\n    if (type === MESSAGE_TYPE.TEXT)    return content;\n    if (type === MESSAGE_TYPE.IMAGE) {\n        return (\n            <div>\n                <img src={content} alt=\"\" />\n                <div>{caption}</div>                \n            </div>\n        );\n    }\n    if (type === MESSAGE_TYPE.VIDEO) {\n        return (\n            <div>\n                <video controls src={content} />\n                <div>{caption}</div>                \n            </div>\n        );\n    }\n    if (type === MESSAGE_TYPE.AUDIO) {\n        return (\n            <div>\n                <AudioPlayer controls src={content} />\n                <div>{caption}</div>                \n            </div>\n        );\n    }\n    if (type === MESSAGE_TYPE.FILE) {\n        return (\n            <div>\n                <a href={content} className=\"fileAttachment\" \n                    download={filename}>\n                    <img src={DownloadIcon} alt=\"\"/> {filename}\n                </a>\n                <div>{caption}</div>                \n            </div>\n        );\n    }\n    return null;\n};\n\n// actual functional component\nexport default function Message(props){\n    let {message} = props;\n    let {admin, amIAuthor} = message;\n    if (admin) {\n        return (\n            <div className=\"message-container\">\n                <div className=\"adminMessageContainer\">\n                    <div className=\"adminMessage\">\n                        {message.content}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n    return (\n        <div className={`message-container ${amIAuthor ? 'self-message' : 'other-message'}`}>\n            <div className=\"message\">\n                <div className={`arrow-container ${amIAuthor ? 'right-align' : 'left-align'}`}> \n                    {amIAuthor ? \n                        <div className=\"arrow right-arrow\"></div>:\n                        <div className=\"arrow left-arrow\"></div>\n                    }\n                </div>\n                <div className={`message-body ${amIAuthor ? 'self' : 'other'}`}>\n                    <div className=\"author\">\n                        {message.username}\n                        <span>{message.timeStamp}</span>\n                    </div>\n                    {messageToComponent(message)}\n                </div>\n            </div>\n        </div>\n    );\n};","import React, { useContext, useEffect, useRef} from 'react';\nimport ChatInput from './ChatInput';\nimport '../styles/Room.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {faTimes, faEllipsisH, faCheck, faUserAlt} from '@fortawesome/free-solid-svg-icons';\nimport ChatContext from '../context/ChatContext';\nimport Message from './Message';\nimport { addToast, removeToast } from '../utility/ToastedNotes';\nimport { v4 as uuidv4 } from 'uuid';\n\n\n// define the functional component\nconst Room = (props)=>{\n    // used to scroll to bottom once updated!\n    const mounted = useRef();\n    useEffect(()=>{\n        if (!mounted.current) {\n            mounted.current = true;\n        } else {\n            // get the container and scroll it to bottom\n            let div = document.getElementById(`messagesContainer`);\n            if (!div)   return;\n            div.scrollTop = div.scrollHeight;            \n        }\n    });\n\n    // get the properties in the context\n    const {\n        room, \n        messageList,\n        userId,\n        exitFromRoom,\n    } = useContext(ChatContext);\n\n    // prompts the user for exit operation\n    const promptExit = () => {\n        let amIOwner = (userId === room.userId);\n        let toastId = uuidv4();\n        let item = (\n            <div className=\"confirmation-dialog\">\n                <div>Are you sure you want to exit?</div>\n                {amIOwner && \n                <div>\n                    You are the owner of this room \n                    if you leave then everybody will be disconnected!\n                </div>}\n                <div className=\"confirmation-button\">\n                    <button className=\"danger\" onClick={()=>{\n                        // remove the popup\n                        removeToast(toastId);\n                        // exit from room\n                        exitFromRoom();\n                    }}><FontAwesomeIcon icon={faCheck} />Exit</button>\n                    <button className=\"light\" onClick={() => removeToast(toastId)}><FontAwesomeIcon icon={faTimes} />Cancel</button>\n                </div>\n            </div>\n        );\n        addToast(item, {appearance: 'none', position: 'center', toastId});\n        // exitFromRoom();\n    };\n    // displays more details about the meeting\n    const showMeetingDetails = () => {\n        let toastId = uuidv4();\n        let item = (\n            <div className=\"meeting-details\">\n                <div className=\"close-details\">\n                    <button onClick={() => removeToast(toastId)}>\n                        <FontAwesomeIcon icon={faTimes} />\n                    </button>\n                </div>\n                <div className=\"header\">\n                    <strong>RoomId: </strong> {room.roomId}\n                </div>\n                <div className=\"members\">\n                    {room.people.map(item => (\n                        <div key={item.id}>\n                            <FontAwesomeIcon icon={faUserAlt} /> \n                            {item.username} \n                            {item.id === userId && <span className=\"you-badge\">You</span>} \n                            {room.userId === item.id && <span className=\"admin-badge\">Admin</span>}<br/>\n                            ({item.id}) \n                        </div>\n                    ))}\n                </div>\n            </div>\n        );\n        addToast(item, {appearance: 'none', toastId, position: 'center'});\n    };\n\n\n\n    // render the component\n    return (\n        <div className=\"roomOuterContainer\">\n            <div className=\"roomInnerContainer\">\n                <div className=\"infoBarContainer\">\n                    <div className=\"roomNameContainer\">\n                        <button onClick={() => {\n                            if (!navigator.clipboard)   return;\n                            navigator.clipboard.writeText(room.roomId).then(() => {\n                                addToast(`RoomId copied!`, {appearance: 'info', autoDismiss: true, timeOut: 2000})\n                            })\n                        }}>\n                            <strong>Room Id: </strong>{room.roomId}\n                        </button>\n                    </div>\n                    <div className=\"infoBarOperations\">\n                        <button onClick={showMeetingDetails}><FontAwesomeIcon icon={faEllipsisH} /></button>\n                        <button onClick={promptExit}><FontAwesomeIcon icon={faTimes} /></button>\n                    </div>\n                </div>\n\n                <div className=\"messagesOuterContainer\" id=\"messagesContainer\">\n                    {messageList.map(message => (\n                            <Message message={message} key={message.id}/>\n                    ))}\n                </div>\n\n                <ChatInput />\n            </div>\n        </div>\n    );\n};\nexport default Room;","import React from 'react';\nimport '../styles/Overlay.scss';\nexport default function Overlay(props){\n    return (\n        <div id=\"overlay\" {...props}>\n            <div className=\"background\"></div>\n            <div className=\"content\">\n                {props.children}\n            </div>\n        </div>\n    );\n};","import React from 'react';\nimport '../styles/RectangularLoader.scss';\nexport default function RectangularLoader(props) {\n    return (\n        <div id=\"rectangular-loader\">\n            <div className=\"lds-grid\">\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n            </div>\n        </div>\n    );\n};","import React, { useCallback, useEffect, useState } from 'react';\nimport Homepage from './components/Homepage';\nimport Room from './components/Room';\nimport ToastedNotes, {addToast, removeToast} from './utility/ToastedNotes';\nimport Modal from './utility/Modal';\nimport io from 'socket.io-client';\nimport Overlay from './utility/Overlay';\nimport RectangularLoader from './utility/RectangularLoader';\nimport './styles/App.scss';\nimport {CONFIG, MESSAGE_TYPE, encryptMessage, decryptMessage} from './utility/DataAccessObject';\nimport ChatContext from './context/ChatContext';\nimport { v4 as uuidv4 } from 'uuid';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes, faCheck } from '@fortawesome/free-solid-svg-icons';\n\n// functional component to be rendered\nconst App = (props)=>{\n\tconst [socket, setSocket] = useState(null);\n\tconst [room, setRoom] = useState(null);\n\tconst [username, setUsername] = useState('');\n\tconst [roomId, setRoomId] = useState('');\n\tconst [userId, setUserId] = useState('');\n\tconst [restrictAccess, setRestrictAccess] = useState(false);\n\tconst [messageList, setMessageList] = useState([]);\n\tconst [toastList, setToastList] = useState([]);\n\tconst [loadingMessage, setLoadingMessage] = useState('');\n\tconst [connectionErrorCount, setConnectionErrorCount] = useState(0);\n\n\t// flags an error message\n\tconst flagError = (message) => {\n\t\t// create a notification\n\t\taddToast(message, {appearance: 'error'});\n\t\t// clear the loading message (if any)\n\t\tsetLoadingMessage('');\n\t}\n\t// flags an information message\n\tconst flagInfo = (message, autoDismiss = false) => {\n\t\t// create a notification\n\t\taddToast(message, {appearance: 'info', autoDismiss});\n\t\t// clear the loading message (if any)\n\t\tsetLoadingMessage('');\n\t}\n\t// updates the details of the room\n\tconst updateRoomDetails = useCallback((room, errorMessage, infoMessage, autoDismiss = false)=>{\n\t\t// update the details of the room\n\t\tsetRoom(room);\n\t\t// check if room is available\n\t\tif (room) {\n\t\t\t// update the roomId\n\t\t\tsetRoomId(room.roomId);\n\t\t} else {\n\t\t\t// disconnect the socket\n\t\t\tsocket.disconnect();\n\t\t\t// clear the roomId\n\t\t\tsetRoomId('');\n\t\t\t// clear the userId\n\t\t\tsetUserId(null);\n\t\t\t// clear the message list\n\t\t\tsetMessageList([]);\n\t\t\t// remove all the toasts\n\t\t\tfor (let i = 0; i < toastList.length; ++i) removeToast(toastList[i]);\n\t\t\t// update the toasts list\n\t\t\tsetToastList([]);\n\t\t\t// refresh the connectionErrorCount\n\t\t\tsetConnectionErrorCount(0);\n\t\t}\n\t\t// check if errorMessage is available\n\t\tif (errorMessage)\tflagError(errorMessage);\n\t\t// check if infoMessage is available\n\t\tif (infoMessage)\tflagInfo(infoMessage, autoDismiss);\n\t\t// clear the loadingMessage\n\t\tsetLoadingMessage('');\n\t}, [socket, toastList]);\n\n\n\t// update the socket instance\n\tuseEffect(() => {\n        // console.log('fetching ip....');\n        // fetch the client-ip\n        fetch('https://api.ipify.org?format=json').then(response => response.json()\n        ).then(response => {\n\t\t\tlet ip = response.ip;\n\t\t\t// console.log(ip);\n            // ip = new Date();\n            // console.log(ip);\n\t\t\t// create a socket instance\n\t\t\tlet mySocket = io(CONFIG.ENDPOINT, {\n\t\t\t\tautoConnect: false,\n\t\t\t\tforceNew: true,\n\t\t\t\treconnection: true,\n\t\t\t\treconnectionAttempts: CONFIG.MAX_RECONNECTION_ATTEMPTS,\n\t\t\t\tquery : {\n\t\t\t\t\tclientIp : ip\n\t\t\t\t}\n\t\t\t});\n\t\t\t// update the socket for the client\n\t\t\tsetSocket(mySocket);\n        }).catch(error => {\n            console.log(error);\n        });\n\t}, []);\n\n\t// implements the listener on socket\n\tuseEffect(() => {\n\t\t// check if socket is available\n\t\tif (!socket)\treturn;\n\t\t// remove all the listeners from socket\n\t\tsocket.off();\n\t\tsocket.on(CONFIG.CONNECT, () => {\n\t\t\t// reset the connection error count\n\t\t\tsetConnectionErrorCount(0);\n\t\t\t// create a temporary id\n\t\t\tlet tempId = uuidv4();\n\t\t\t// update the user id\n\t\t\tsetUserId(tempId);\n\t\t\t// emit the create or join room event\n\t\t\tsocket.emit(CONFIG.CREATE_OR_JOIN, roomId, tempId, username, restrictAccess);\n\t\t});\n\t\t// on connection error\n\t\tsocket.on(CONFIG.CONNECTION_ERROR, () => {\n\t\t\t// increase the connection error count\n\t\t\tlet count = connectionErrorCount + 1;\n\t\t\t// update the count\n\t\t\tsetConnectionErrorCount(count);\n\t\t\t// compare the count\n\t\t\tif (connectionErrorCount === CONFIG.MAX_RECONNECTION_ATTEMPTS + 1) {\n\t\t\t\t// throw error\n\t\t\t\tflagError(`Failed to connect`);\n\t\t\t\t// clear the error message\n\t\t\t\tsetLoadingMessage('');\n\t\t\t}\n\t\t});\n\t\t// if there is an ip error then inform the client\n\t\tsocket.on(CONFIG.IP_ERROR, flagError);\n\t\t// if already a session is running\n\t\tsocket.on(CONFIG.FOUND_RUNNING_ROOM_SESSION, flagError);\n\t\t// if room is created successfully then update room details\n\t\tsocket.on(CONFIG.CREATE_ROOM_SUCCESS, updateRoomDetails);\n\t\t// if no such room found\n\t\tsocket.on(CONFIG.NO_SUCH_ROOM_ERROR, () => updateRoomDetails(null, `Failed to find a room with roomId ${roomId}`));\n\t\t// user has joined via another window\n\t\tsocket.on(CONFIG.JOINED_VIA_ANOTHER_WINDOW, () => updateRoomDetails(null, null, `You have joined from another window!`));\n\t\t// if user has successfully joined then update the details\n\t\tsocket.on(CONFIG.JOIN_ROOM_SUCCESS, updateRoomDetails);\n\t\t// inform the user about waiting request\n\t\tsocket.on(CONFIG.WAIT_FOR_APPROVAL, () => \n\t\t\tsetLoadingMessage(`You will be able to join with id ${userId} when admin lets you in!`));\n\t\t// infor the user about request rejection\n\t\tsocket.on(CONFIG.REQUEST_TO_JOIN_REJECTED, () => \n\t\t\tupdateRoomDetails(null, `Your request to join the session is rejected by admin`));\n\t\t// if admin permits the client then let the client in!\n\t\tsocket.on(CONFIG.LET_CLIENT_IN, () => socket.emit(CONFIG.LET_CLIENT_IN, roomId, userId, username));\n\t\t// when someone makes a request to join\n\t\tsocket.on(CONFIG.JOIN_ROOM_REQUEST, (socketId, userId, username) => {\n\t\t\tlet toastId = uuidv4();\n\t\t\tlet item = (\n\t\t\t\t<div className=\"pending-request\">\n\t\t\t\t\t<span>{username}</span> wants to join this session<br/>\n\t\t\t\t\t(<span>{userId}</span>)\n\t\t\t\t\t<div className=\"request-operations\">\n\t\t\t\t\t\t<button className=\"success-button\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t// remove the toast\n\t\t\t\t\t\t\t\tremoveToast(toastId);\n\t\t\t\t\t\t\t\t// accept the request\n\t\t\t\t\t\t\t\tsocket.emit(CONFIG.APPROVE_REQUEST, roomId, socketId);\n\t\t\t\t\t\t\t}}><FontAwesomeIcon icon={faCheck}/> Accept </button>\n\t\t\t\t\t\t<button className=\"error-button\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t// remove the toast\n\t\t\t\t\t\t\t\tremoveToast(toastId);\n\t\t\t\t\t\t\t\t// reject the request\n\t\t\t\t\t\t\t\tsocket.emit(CONFIG.REJECT_REQUEST, roomId, socketId);\n\t\t\t\t\t\t\t}}><FontAwesomeIcon icon={faTimes}/> Reject </button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t\taddToast(item, {appearance: 'none', toastId, position: 'center'});\n\t\t\t// store the toastId\n\t\t\tsetToastList([...toastList, toastId]);\n\t\t});\n\t\t// on room-terminated\n\t\tsocket.on(CONFIG.TERMINATE_ROOM, message => {\n\t\t\t// emit the leave room event\n\t\t\tsocket.emit(CONFIG.EXIT_FROM_ROOM, roomId, username);\n\t\t\t// update the details of the room\n\t\t\tupdateRoomDetails(null, null, message);\n\t\t});\n\t\t// time out for room\n\t\tsocket.on(CONFIG.ROOM_TIME_OUT, message => {\n\t\t\t// emit the leave room event\n\t\t\tsocket.emit(CONFIG.EXIT_FROM_ROOM, roomId, username);\n\t\t\t// update the details of the room\n\t\t\tupdateRoomDetails(null, null, message);\n\t\t});\n\n\t\t// when someone joins the room\n\t\tsocket.on(CONFIG.JOINED_ROOM, (room, username, timeStamp) => {\n\t\t\t// update the details of the room\n\t\t\tupdateRoomDetails(room);\n\t\t\t// add a join message\n\t\t\tlet oldMessage = [...messageList];\n\t\t\t// add a new message to message list\n\t\t\toldMessage.push({\n\t\t\t\tid: oldMessage.length,\n\t\t\t\tcontent: `${username} has joined`,\n\t\t\t\ttimeStamp,\n\t\t\t\tadmin: true\n\t\t\t});\n\t\t\t// add this message to list of messages\n\t\t\tsetMessageList(oldMessage);\n\t\t});\n\t\t// when someone leaves the room\n\t\tsocket.on(CONFIG.LEFT_ROOM, (room, username, timeStamp) => {\n\t\t\t// update the details of the room\n\t\t\tupdateRoomDetails(room);\n\t\t\t// add a join message\n\t\t\tlet oldMessage = [...messageList];\n\t\t\t// add a new message to message list\n\t\t\toldMessage.push({\n\t\t\t\tid: oldMessage.length,\n\t\t\t\tcontent: `${username} has left`,\n\t\t\t\ttimeStamp,\n\t\t\t\tadmin: true\n\t\t\t});\n\t\t\t// add this message to list of messages\n\t\t\tsetMessageList(oldMessage);\n\t\t});\n\n\t\t// when someone sends a message\n\t\tsocket.on(CONFIG.MESSAGE_ALL, (message, timeStamp) => {\n\t\t\t// decrypt the message\n\t\t\tlet decrypted = null;\n\t\t\ttry{decrypted = decryptMessage(room.key, message)}catch(error){}\n\t\t\t// check if message was decrypted\n\t\t\tif (!decrypted)\treturn;\n\t\t\t// add properties to the message\n\t\t\tdecrypted.timeStamp = timeStamp;\n\t\t\tdecrypted.amIAuthor = (userId === decrypted.userId);\n\t\t\t// add this message to list of messages\n\t\t\tsetMessageList([...messageList, decrypted])\n\t\t});\n\t}, [socket, room, roomId, userId, username, toastList,\n\t\trestrictAccess, messageList, updateRoomDetails,\n\t\tconnectionErrorCount,\n\t]);\n\n\t// function to create or join room\n\tconst createOrJoinRoom = () => {\n\t\t// check if socket is available\n\t\tif (!socket)\treturn flagInfo(`Please wait! I'm fetching your IP`);\n\t\t// disconnect the socket if already connected\n\t\tsocket.disconnect();\n\t\t// connect to the endpoint\n\t\tsocket.connect();\n\t\t// inform the user about waiting\n\t\tsetLoadingMessage(`Please wait! I'm processing your request...`);\n\t};\n\n\t// exit from room\n\tconst exitFromRoom = () => {\n\t\t// emit the exit from room event\n\t\tsocket.emit(CONFIG.EXIT_FROM_ROOM, roomId, username);\n\t\t// clear the room\n\t\tupdateRoomDetails(null);\n\t};\n\n\t// creates and sends the message\n\tconst sendMessage = (message) => {\n\t\t// add additional properties to the message\n\t\tmessage.id = uuidv4();\n\t\tmessage.username = username;\n\t\tmessage.userId = userId;\n\t\t// encrypt the message\n\t\tlet encryptedContent = null;\n\t\ttry{encryptedContent = encryptMessage(room.key, message);}catch(error) {}\n\t\tif (!encryptedContent)\tflagError(`Failed to encrypt your message!`);\n\t\telse \t\t\t\t\tsocket.emit(CONFIG.MESSAGE_ALL, roomId, encryptedContent);\n\t};\n\n\t// decide the component to be rendered\n\tlet itemToDisplay = <Homepage createOrJoinRoom={createOrJoinRoom} />;\n\tif (room) itemToDisplay = <Room room={room} />;\n\t// render the component\n\treturn (\n\t\t<div className=\"app\">\n\t\t\t<ToastedNotes>\t\t\t\n\t\t\t\t<ChatContext.Provider\n\t\t\t\t\tvalue={{\n\t\t\t\t\t\t// used for homepage\n\t\t\t\t\t\tcreateOrJoinRoom, \n\t\t\t\t\t\tusername, setUsername,\n\t\t\t\t\t\troomId, setRoomId,\n\t\t\t\t\t\trestrictAccess, setRestrictAccess,\n\n\t\t\t\t\t\t// used for room\n\t\t\t\t\t\troom, sendMessage,\n\t\t\t\t\t\tMESSAGE_TYPE,\n\t\t\t\t\t\tmessageList, setMessageList,\n\t\t\t\t\t\texitFromRoom,\n\t\t\t\t\t\tuserId\n\t\t\t\t\t}}>\n\t\t\t\t\t{itemToDisplay}\n\t\t\t\t</ChatContext.Provider>\n\t\t\t\t{loadingMessage && \n\t\t\t\t<Overlay>\n\t\t\t\t\t<RectangularLoader />\n\t\t\t\t\t<div className=\"loadingMessage\">{loadingMessage}</div>\n\t\t\t\t</Overlay>}\n\t\t\t\t<Modal />\n\t\t\t</ToastedNotes>\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}